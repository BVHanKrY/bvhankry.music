<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BVHanKrY - Música Oficial</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="icon" href="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/iconos/pesta%C3%B1a%20simbo.png" type="image/png">
    <style>
        :root {
            --bg-body: #121212;
            --bg-gradient: linear-gradient(to bottom, rgba(18,18,18,0.85) 0%, rgba(18,18,18,0.95) 40%, #121212 100%);
            --bg-card: #181818;
            --bg-card-hover: #282828;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --accent-green: #1ed760;
            --accent-hover: #1fdf64;
            --nav-height: 64px;
            --player-height: 110px;
            --vinyl-size: 56px; /* Tamaño ajustado del vinilo (PC) */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { 
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-body);
            background-image: var(--bg-gradient), url(https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/ChatGPT%20Image%2030%20dic%202025%2C%2010_59_54%20a.m..png);
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
            color: var(--text-primary); 
            min-height: 100vh; 
            padding-bottom: calc(var(--player-height) + 20px); 
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        /* --- Tipografía y Navegación --- */
        h1, h2, h3 { font-weight: 700; }
        .main-nav { 
            background-color: rgba(18, 18, 18, 0.95); 
            backdrop-filter: blur(12px);
            height: var(--nav-height);
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000; 
            border-bottom: 1px solid rgba(255,255,255,0.05); 
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            display: flex; align-items: center;
        }
        .nav-container { display: flex; justify-content: space-between; align-items: center; width: 100%; padding: 0 32px; max-width: 1600px; margin: 0 auto; }
        .logo img { height: 32px; object-fit: contain; border-radius: 4px; }
        .nav-links { display: flex; gap: 32px; list-style: none; }
        .nav-links a { color: var(--text-secondary); text-decoration: none; font-weight: 700; font-size: 0.9rem; transition: color 0.2s; }
        .nav-links a:hover, .nav-links a.active { color: var(--text-primary); }
        .social-links { display: flex; gap: 20px; }
        .social-links a img { height: 20px; opacity: 0.7; transition: all 0.2s; }
        .social-links a:hover img { opacity: 1; transform: scale(1.1); }
        
        .container { max-width: 1400px; margin: calc(var(--nav-height) + 40px) auto 0; padding: 0 32px; position: relative; }
        
        /* --- Header --- */
        header { padding: 40px 0; display: flex; align-items: flex-end; gap: 24px; margin-bottom: 40px; }
        .header-art {
            width: 232px; height: 232px; background-color: #333;
            background-image: url('https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png');
            background-size: cover; background-position: center;
            box-shadow: 0 8px 50px rgba(0,0,0,0.6);
            display: flex; align-items: center; justify-content: center;
            font-size: 0; color: #555; font-weight: 900;
            border-radius: 4px; flex-shrink: 0;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative; overflow: hidden;
        }
        .header-art::after {
            content: ''; position: absolute; top:0; left:0; width:100%; height:100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 100%);
            opacity: 0; transition: opacity 0.3s; pointer-events: none;
        }
        .header-art:hover::after { opacity: 1; }
        .header-text { display: flex; flex-direction: column; justify-content: flex-end; }
        .header-type { font-size: 0.8rem; text-transform: uppercase; font-weight: 700; margin-bottom: 8px; }
        header h1 { font-size: clamp(2.5rem, 6vw, 5rem); font-weight: 900; margin: 0; line-height: 1; letter-spacing: -2px; color: #fff; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        header p { font-size: 0.9rem; color: var(--text-secondary); margin-top: 10px; font-weight: 400; }

        /* --- Grid de Canciones --- */
        .songs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px; margin-bottom: 60px; }
        .cancion-card { 
            background-color: var(--bg-card); border-radius: 8px; padding: 16px;
            transition: background-color 0.3s ease, transform 0.2s, box-shadow 0.2s;
            cursor: pointer; display: flex; flex-direction: column; position: relative; border: 1px solid transparent;
        }
        .cancion-card:hover { background-color: var(--bg-card-hover); transform: translateY(-4px); border-color: rgba(255,255,255,0.1); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .floating-play-btn {
            position: absolute; right: 20px; bottom: 90px; width: 48px; height: 48px; border-radius: 50%;
            background-color: var(--accent-green); box-shadow: 0 8px 8px rgba(0,0,0,0.3);
            display: flex; align-items: center; justify-content: center;
            opacity: 0; transform: translateY(8px); transition: all 0.3s ease; z-index: 10; border: none; cursor: pointer;
        }
        .cancion-card:hover .floating-play-btn { opacity: 1; transform: translateY(0); }
        .floating-play-btn:hover { background-color: var(--accent-hover); transform: scale(1.05) !important; }
        .floating-play-btn svg { fill: #000; width: 24px; height: 24px; margin-left: 2px; }
        .song-header-row { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
        .song-title-text { color: var(--text-primary); font-size: 1rem; font-weight: 700; margin-bottom: 4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
        .song-artist-text { color: var(--text-secondary); font-size: 0.85rem; font-weight: 400; }
        .mini-visualizer { display: flex; gap: 3px; height: 16px; align-items: flex-end; margin-top: 5px; opacity: 0; transition: opacity 0.3s;}
        .cancion-card.playing .mini-visualizer { opacity: 1; }
        .bar { width: 4px; background: var(--accent-green); border-radius: 2px; animation: none; height: 20%; }
        .cancion-card.playing .bar { animation: eq 0.6s infinite ease-in-out alternate; }
        .bar:nth-child(2) { animation-delay: 0.1s; } .bar:nth-child(3) { animation-delay: 0.2s; } .bar:nth-child(4) { animation-delay: 0.3s; }
        @keyframes eq { from { height: 20%; } to { height: 100%; } }
        .player-wrapper { margin-top: auto; position: relative; z-index: 5; padding-top: 10px; }
        .audio-controls-row-1 { display: flex; align-items: center; gap: 12px; }
        .inline-play-btn { width: 32px; height: 32px; background: transparent; border: 1px solid var(--text-secondary); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s; color: #fff; flex-shrink: 0; }
        .inline-play-btn:hover { border-color: #fff; transform: scale(1.1); }
        .inline-play-btn svg { width: 12px; height: 12px; fill: currentColor; pointer-events: none; }
        .cancion-card.playing .inline-play-btn { border-color: var(--accent-green); color: var(--accent-green); }
        .progress-container { flex-grow: 1; height: 4px; background-color: #535353; position: relative; cursor: pointer; border-radius: 2px; overflow: hidden; }
        .progress-bar { height: 100%; background-color: #fff; width: 0%; transition: width 0.1s linear; }
        .cancion-card.playing .progress-bar { background-color: var(--accent-green); }
        .time-display { font-size: 0.75rem; color: var(--text-secondary); min-width: 38px; text-align: right; font-family: 'Roboto Mono', monospace; font-weight: 500; }
        .song-stats { display: flex; justify-content: space-between; align-items: center; margin-top: 12px; font-size: 0.75rem; color: var(--text-secondary); }
        .likes-counter { cursor: pointer; display: flex; align-items: center; gap: 6px; transition: color 0.2s; user-select: none; }
        .likes-counter:hover { color: #fff; }
        .heart-icon { font-size: 14px; transition: transform 0.2s; }
        .heart-icon.liked { color: var(--accent-green); }
        .share-button-container { margin-top: 16px; }
        .share-whatsapp { font-size: 0.75rem; color: var(--text-secondary); text-decoration: none; text-transform: uppercase; font-weight: 700; letter-spacing: 1px; border-bottom: 1px solid transparent; transition: border-color 0.2s; }
        .share-whatsapp:hover { border-bottom-color: var(--text-primary); color: var(--text-primary); }

        /* --- Info Sections --- */
        .info-sections { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 60px; }
        section { padding: 24px; border: 1px solid rgba(255,255,255,0.05); background: rgba(255,255,255,0.02); border-radius: 8px; backdrop-filter: blur(5px); }
        section h2 { font-size: 1.2rem; margin-bottom: 12px; color: #fff; display: flex; align-items: center; gap: 10px; }
        section h2::before { content: ''; width: 4px; height: 18px; background: var(--accent-green); display: block; border-radius: 2px; }
        section p { color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6; }
        .tag-coming-soon { background-color: #333; color: #fff; padding: 4px 10px; font-size: 0.7rem; font-weight: 700; border-radius: 12px; display: inline-block; margin-top: 10px; }

        /* --- Footer --- */
        footer { margin-top: 80px; padding: 40px 32px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; }
        footer p { font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 8px; }
        .footer-logo { font-size: 1.5rem; font-weight: 900; letter-spacing: -1px; color: #fff; margin-bottom: 10px; display: inline-block; }
        
        /* --- GLOBAL PLAYER REVAMPED --- */
        .global-player {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background-color: #181818; 
            border-top: 1px solid #282828;
            padding: 0 24px; display: flex; align-items: center; justify-content: space-between;
            z-index: 2000; 
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            box-shadow: 0 -4px 20px rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            height: var(--player-height);
        }
        .global-player.active { transform: translateY(0); }

        /* Left: Vinyl Cover */
        .gp-left { 
            flex: 0 0 auto; 
            display: flex; align-items: center; gap: 12px; 
            width: 20%; max-width: 260px;
            z-index: 10;
        }
        
        /* Efecto Vinilo Redondo */
        .gp-cover { 
            width: var(--vinyl-size); height: var(--vinyl-size);
            border-radius: 50%; 
            position: relative;
            flex-shrink: 0;
            background: #000;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            overflow: hidden;
            border: 2px solid #333;
            cursor: pointer;
        }
        
        /* Imagen dentro del vinilo */
        .gp-cover img {
            width: 100%; height: 100%; object-fit: cover;
            border-radius: 50%;
            position: relative; z-index: 2;
            transition: opacity 0.3s ease;
        }

        /* Textura de surcos de vinilo (overlay) */
        .gp-cover::before {
            content: ''; position: absolute; top:0; left:0; width:100%; height:100%;
            border-radius: 50%;
            background: 
                radial-gradient(circle, transparent 30%, rgba(0,0,0,0.3) 31%, transparent 32%),
                repeating-radial-gradient(#111 0, #111 1px, #222 2px, #222 3px);
            z-index: 3;
            pointer-events: none;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.8);
        }

        /* Brillo al pasar el mouse */
        .gp-cover::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0) 100%);
            transform: rotate(30deg) translateY(-100%);
            transition: transform 0.6s ease;
            pointer-events: none;
            z-index: 4;
        }
        .gp-cover:hover::after { transform: rotate(30deg) translateY(100%); }

        /* Animación giro */
        .gp-cover-spin { animation: spin 4s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .gp-info-text { display: flex; flex-direction: column; overflow: hidden; justify-content: center; }
        .gp-title { font-size: 0.9rem; font-weight: 600; color: #fff; margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .gp-artist { font-size: 0.75rem; color: var(--text-secondary); }

        /* Center: Controls */
        .gp-center { 
            flex: 1; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            max-width: 50%; 
            padding: 0 20px;
        }

        .gp-controls { display: flex; align-items: center; gap: 24px; margin-bottom: 8px; }
        
        .gp-btn { 
            background: none; border: none; color: var(--text-secondary); cursor: pointer; 
            transition: all 0.2s; display: flex; align-items: center; justify-content: center; padding: 4px;
        }
        .gp-btn:hover { color: #fff; transform: scale(1.1); }
        .gp-btn:active { transform: scale(0.95); }
        
        /* Botón Play/Pause Grande */
        .gp-play-pause { 
            width: 36px; height: 36px; background: #fff; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; transition: transform 0.2s; color: #000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .gp-play-pause:hover { transform: scale(1.1); background: var(--accent-green); }
        .gp-play-pause svg { fill: currentColor; width: 16px; height: 16px; }

        /* Barra de Progreso - Color destacado */
        .gp-progress-wrapper { 
            width: 100%; display: flex; align-items: center; gap: 12px; 
            font-size: 0.75rem; color: var(--text-secondary); font-family: 'Roboto Mono', monospace; 
        }
        .gp-progress-container { 
            flex-grow: 1; height: 5px; background: #535353; border-radius: 3px; 
            cursor: pointer; position: relative; 
        }
        .gp-progress-container:hover { height: 6px; }
        
        /* Color dinámico brillante */
        .gp-progress-bar { 
            height: 100%; 
            background: var(--accent-green); 
            width: 0%; 
            border-radius: 3px; 
            position: relative; 
            box-shadow: 0 0 10px var(--accent-green); /* Efecto de brillo */
        }
        .gp-progress-bar::after { 
            content:''; position: absolute; right: -5px; top: -3px; 
            width: 12px; height: 12px; background: #fff; border-radius: 50%; 
            opacity: 0; transition: opacity 0.2s; box-shadow: 0 0 5px rgba(255,255,255,0.5);
        }
        .gp-progress-container:hover .gp-progress-bar::after { opacity: 1; }

        /* Botones extra (Corazón y Compartir) debajo del tiempo */
        .gp-extra-actions {
            display: flex; gap: 16px; margin-top: 4px;
        }
        .gp-action-btn {
            background: none; border: none; color: var(--text-secondary); cursor: pointer;
            transition: color 0.2s, transform 0.2s; padding: 2px;
        }
        .gp-action-btn:hover { color: #fff; transform: scale(1.1); }
        .gp-action-btn.active-like { color: var(--accent-green); } 
        .gp-action-btn svg { width: 18px; height: 18px; fill: currentColor; }

        /* Right: Volume & Share (PC Only Logic) */
        .gp-right { 
            flex: 0 0 auto; 
            display: flex; align-items: center; justify-content: flex-end; 
            gap: 16px; width: 25%; 
            position: relative; 
        }

        /* --- MENÚ VOLUMEN VERTICAL (Despliegue hacia arriba) --- */
        .volume-widget { position: relative; display: flex; align-items: center; }
        
        .volume-popover {
            position: absolute; bottom: 120%; right: 0;
            background: #282828; padding: 15px 10px;
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            opacity: 0; pointer-events: none; transform: translateY(10px);
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            z-index: 50;
            height: 120px;
        }
        .volume-widget:hover .volume-popover,
        .volume-popover.show {
            opacity: 1; pointer-events: auto; transform: translateY(0);
        }

        /* Hack para Slider Vertical */
        .vol-slider-wrapper {
            height: 100px; width: 4px; position: relative;
        }
        input[type=range].vol-slider-vertical {
            -webkit-appearance: none;
            width: 100px; 
            height: 4px;
            background: #555;
            border-radius: 2px;
            outline: none;
            transform: rotate(-90deg);
            transform-origin: center;
            cursor: pointer;
        }
        input[type=range].vol-slider-vertical::-webkit-slider-thumb {
            -webkit-appearance: none; width: 12px; height: 12px; 
            background: #fff; border-radius: 50%; cursor: pointer;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
        }

        /* --- MENÚ COMPARTIR (Despliegue) --- */
        .share-menu-container-center { position: relative; }
        .share-dropdown {
            position: absolute; bottom: 140%; right: 0;
            background: #282828; border-radius: 12px;
            padding: 10px;
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            opacity: 0; pointer-events: none; transform: translateY(10px) scale(0.9);
            transition: all 0.2s ease;
            z-index: 50;
            min-width: 200px;
        }
        .share-dropdown.active { opacity: 1; pointer-events: auto; transform: translateY(0) scale(1); }
        
        .share-item { display: flex; flex-direction: column; align-items: center; gap: 4px; color: #fff; text-decoration: none; font-size: 0.7rem; transition: transform 0.2s; }
        .share-item:hover { transform: scale(1.1); color: var(--accent-green); }
        .share-item svg { width: 24px; height: 24px; fill: currentColor; margin-bottom: 2px; }

        /* --- Toast --- */
        #toast-container { position: fixed; bottom: 120px; left: 50%; transform: translateX(-50%); z-index: 3000; pointer-events: none; width: 90%; max-width: 300px; text-align: center; }
        .toast { background: #2e77d0; color: #fff; padding: 12px 24px; border-radius: 24px; font-size: 0.9rem; font-weight: 500; box-shadow: 0 4px 12px rgba(0,0,0,0.5); opacity: 0; transform: translateY(10px); transition: all 0.3s; margin-bottom: 10px; white-space: nowrap; }
        .toast.show { opacity: 1; transform: translateY(0); }

        /* --- Responsive Mobile --- */
        @media (max-width: 768px) {
            .container { padding: 0 16px; margin-top: calc(var(--nav-height) + 20px); }
            .nav-container { padding: 0 16px; }
            .nav-links { display: none; }
            header { flex-direction: column; align-items: flex-start; }
            .header-art { width: 180px; height: 180px; }
            
            /* Player Mobile Config */
            .global-player { padding: 10px 16px; height: auto; flex-wrap: wrap; justify-content: center; }
            
            .gp-left { 
                width: 20%; order: 1; max-width: 50px; 
                gap: 5px; justify-content: center; 
            }
            
            /* Icono más pequeño en celular */
            .gp-cover { 
                width: 40px; 
                height: 40px; 
            }

            .gp-info-text { display: none; } 
            
            .gp-center { 
                width: 100%; order: 2; max-width: 100%; 
                margin-top: 5px; padding: 0;
            }
            .gp-controls { gap: 15px; }
            
            .gp-right { display: none; }

            /* Mover Like y Share al centro en móvil, debajo de la barra de progreso */
            .gp-extra-actions { justify-content: center; margin-top: 5px; }
        }
        
        /* Ocultar elementos de PC en Mobile */
        .pc-only { display: flex; }
        @media (max-width: 768px) { .pc-only { display: none !important; } }

        /* --- CORRECCIÓN PUNTOS BLANCOS --- */
        .nav-links li, .social-links li { list-style-type: none !important; margin: 0; padding: 0; }
        .nav-links li::marker, .social-links li::marker { content: ""; }

        @media (max-width: 768px) {
    .container {
        padding: 0 12px;
        margin-top: calc(var(--nav-height) + 20px);
    }

    .nav-container {
        padding: 0 16px;
        flex-direction: column;
        align-items: flex-start;
    }

    .nav-links {
        display: flex;
        gap: 16px;
        margin-top: 10px;
    }

    header {
        flex-direction: column;
        align-items: flex-start;
        padding: 20px 0;
    }

    .header-art {
        width: 120px;
        height: 120px;
        margin-bottom: 10px;
    }

    .header-text h1 {
        font-size: 2rem;
    }

    .songs-grid {
        gap: 16px;
    }

    .cancion-card {
        padding: 12px;
    }

    .song-title-text {
        font-size: 0.95rem;
    }

    .song-artist-text {
        font-size: 0.75rem;
    }

    .inline-play-btn {
        width: 28px;
        height: 28px;
    }

    .floating-play-btn {
        width: 42px;
        height: 42px;
        bottom: 80px;
    }

    .global-player {
        padding: 10px 16px;
        height: 70px;
        flex-wrap: nowrap;
        align-items: center;
    }

    .gp-left {
        flex: 0 0 auto;
        gap: 8px;
        width: auto;
        max-width: 60px;
    }

    .gp-cover {
        width: 40px;
        height: 40px;
    }

    .gp-info-text {
        display: flex;
    }

    .gp-title {
        font-size: 0.85rem;
    }

    .gp-artist {
        font-size: 0.7rem;
    }

    .gp-center {
        flex: 1;
        padding: 0 10px;
    }

    .gp-controls {
        gap: 12px;
    }

    .gp-play-pause {
        width: 30px;
        height: 30px;
    }

    .gp-right {
        display: none !important;
    }

    .gp-extra-actions {
        display: none;
    }

    .share-dropdown {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }

    .toast {
        font-size: 0.8rem;
    }

    footer {
        padding: 20px 16px;
        font-size: 0.8rem;
    }

    .footer-logo {
        font-size: 1.2rem;
    }
}
        /* --- MENU HAMBURGUESA (MÓVIL) --- */
.menu-toggle {
  display: none;
  background: none;
  border: none;
  color: white;
  font-size: 1.8rem;
  cursor: pointer;
}

/* MOBILE */
@media (max-width: 768px) {
  .menu-toggle {
    display: block;
  }

  .nav-links {
    display: none;
    flex-direction: column;
    background: rgba(0,0,0,0.9);
    position: absolute;
    top: 60px;
    right: 0;
    width: 100%;
    padding: 1rem 0;
    z-index: 1000;
  }

  .nav-links.active {
    display: flex;
  }

  .nav-links li {
    text-align: center;
    padding: 0.8rem 0;
  }
}
        @media (max-width: 768px) {
  .main-nav { position: fixed; }

  .nav-container{
    position: relative;
    display: flex;
    flex-direction: row;          /* <-- clave */
    align-items: center;
    justify-content: space-between;
    padding: 0 14px;
    gap: 10px;
  }

  /* Orden: Logo - Social - Hamburguesa */
  .logo { order: 1; flex: 0 0 auto; }
  .social-links { 
    order: 2; 
    flex: 1 1 auto; 
    justify-content: center;
    gap: 14px;
  }
  .menu-toggle { order: 3; flex: 0 0 auto; }

  /* El menú (nav-links) debe ser dropdown, no fila */
  .nav-links{
    display: none;                 /* por defecto oculto */
    position: absolute;
    top: var(--nav-height);
    left: 0;
    width: 100%;
    background: rgba(0,0,0,0.92);
    padding: 12px 0;
    flex-direction: column;
    z-index: 1001;
  }
  .nav-links.active{ display: flex; }

  .nav-links li{ text-align:center; padding: 10px 0; }
}
        @media (max-width: 768px) {
  /* Player: más compacto y con info visible */
  .global-player{
    height: auto;
    padding: 10px 12px;
    gap: 10px;
  }

  .gp-left{
    width: auto;
    max-width: none;
    gap: 10px;
  }

  .gp-info-text{
    display: flex;
    max-width: 42vw;       /* espacio real para texto */
    min-width: 140px;
  }
  .gp-title{
    font-size: 0.9rem;
    max-width: 42vw;
  }
  .gp-artist{
    font-size: 0.75rem;
  }

  /* Centro: que use el espacio restante */
  .gp-center{
    flex: 1;
    max-width: none;
    padding: 0;
  }

  /* Progreso: en móvil solo mostramos un tiempo para no aplastar */
  #gpDuration{ display:none; }     /* <-- quita el segundo 0:00 */
  .gp-progress-wrapper{
    gap: 8px;
  }
  .gp-progress-container{
    height: 6px;
  }
}
        @media (max-width: 768px) {
  /* Asegura espacio para info */
  .gp-info-text{
    display: flex;
    max-width: 44vw;
    min-width: 120px;
    overflow: hidden;
  }

  .gp-title{
    font-size: 0.82rem;      /* más pequeño */
    font-weight: 800;        /* negrilla fuerte */
    line-height: 1.1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .gp-artist{
    font-size: 0.72rem;
    font-weight: 700;        /* negrilla */
    opacity: 0.9;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Tiempos un poco más pequeños para que no aplasten */
  .gp-progress-wrapper{
    font-size: 0.72rem;
    gap: 8px;
  }
}
    </style>
</head>
<body>
    <!-- Navegación -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="#" class="logo"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/iconos/pesta%C3%B1a%20simbo.png" alt="Logo BVHanKrY"></a>
            <button class="menu-toggle" aria-label="Abrir menú">☰</button>
            <ul class="nav-links">
                <li><a href="#music" class="active">Música</a></li>
                <li><a href="#videos">Videos</a></li>
                <li><a href="#shop">Shop</a></li>
            </ul>
            <ul class="social-links">
                <li><a href="https://www.instagram.com/henryandresvill/" target="_blank" aria-label="Instagram"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/instagram.png" alt="Instagram"></a></li>
                <li><a href="https://wa.link/uuajw5" target="_blank" aria-label="WhatsApp"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/whatsapp.png" alt="WhatsApp"></a></li>
                <li><a href="https://www.youtube.com/channel/UCJrxTphZnI8Rm_GTyCJp44g" target="_blank" aria-label="YouTube"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/youtube.png" alt="YouTube"></a></li>
                <li><a href="https://open.spotify.com/intl-es/artist/0IPDl4adPnkF6LaoEyUwDl" target="_blank" aria-label="Spotify"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/spotify.png" alt="Spotify"></a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <header>
            <div class="header-art">EP</div>
            <div class="header-text">
                <span class="header-type">EP • 2026</span>
                <h1>BVHanKrY</h1>
                <p>DUB Music • Ecuador • BVros Productions</p>
            </div>
        </header>

        <div class="songs-grid" id="music">
            <!-- 1. Tinkuy -->
            <article class="cancion-card" id="card-navi" data-title="Tinkuy" data-artist="BVHanKrY" data-cover="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png">
                <button class="floating-play-btn btn-card-float" aria-label="Reproducir"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
                <div class="song-header-row">
                    <div>
                        <div class="song-title-text">Tinkuy</div>
                        <div class="song-artist-text">BVHanKrY</div>
                    </div>
                    <div class="mini-visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                </div>
                <div class="player-wrapper">
                    <div class="audio-controls-row-1">
                        <button class="inline-play-btn btn-card" aria-label="Reproducir">
                            <svg class="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <svg class="icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <div class="progress-container"><div class="progress-bar"></div></div>
                        <div class="time-display font-mono">0:00</div>
                    </div>
                </div>
                <audio src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/main/audio/tinkuy.mp3" preload="metadata" data-id="navi"></audio>
                <div class="song-stats">
                    <div class="likes-counter" title="Dar Me gusta"><span class="heart-icon">♡</span> <span class="likes-count font-mono">0</span></div>
                    <div class="plays-counter font-mono"><span class="plays-count">0</span> plays</div>
                </div>
                <div class="share-button-container">
                    <a href="#" onclick="copyToClipboard('https://bvhankry.onrender.com', 'Tinkuy'); return false;" class="share-whatsapp">Compartir</a>
                </div>
            </article>

            <!-- 2. Subtle Gad -->
            <article class="cancion-card" id="card-subtle_gad" data-title="Subtle Gad" data-artist="BVHanKrY" data-cover="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png">
                <button class="floating-play-btn btn-card-float" aria-label="Reproducir"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
                <div class="song-header-row">
                    <div><div class="song-title-text">Subtle Gad</div><div class="song-artist-text">BVHanKrY</div></div>
                    <div class="mini-visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                </div>
                <div class="player-wrapper">
                    <div class="audio-controls-row-1">
                        <button class="inline-play-btn btn-card" aria-label="Reproducir">
                            <svg class="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <svg class="icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <div class="progress-container"><div class="progress-bar"></div></div>
                        <div class="time-display font-mono">0:00</div>
                    </div>
                </div>
                <audio src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/main/audio/Subtle gad.mp3" preload="metadata" data-id="subtle_gad"></audio>
                <div class="song-stats">
                    <div class="likes-counter" title="Dar Me gusta"><span class="heart-icon">♡</span> <span class="likes-count font-mono">0</span></div>
                    <div class="plays-counter font-mono"><span class="plays-count">0</span> plays</div>
                </div>
                <div class="share-button-container">
                    <a href="#" onclick="copyToClipboard('https://bvhankry.onrender.com', 'Subtle Gad'); return false;" class="share-whatsapp">Compartir</a>
                </div>
            </article>

            <!-- 3. Regresión -->
            <article class="cancion-card" id="card-regrecion" data-title="Regresión" data-artist="BVHanKrY" data-cover="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png">
                <button class="floating-play-btn btn-card-float" aria-label="Reproducir"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
                <div class="song-header-row">
                    <div><div class="song-title-text">Regresión</div><div class="song-artist-text">BVHanKrY</div></div>
                    <div class="mini-visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
                </div>
                <div class="player-wrapper">
                    <div class="audio-controls-row-1">
                        <button class="inline-play-btn btn-card" aria-label="Reproducir">
                            <svg class="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            <svg class="icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                        </button>
                        <div class="progress-container"><div class="progress-bar"></div></div>
                        <div class="time-display font-mono">0:00</div>
                    </div>
                </div>
                <audio src="https://github.com/BVHanKrY/bvhankry.music/raw/refs/heads/main/audio/regrecion.mp3" preload="metadata" data-id="regrecion"></audio>
                <div class="song-stats">
                    <div class="likes-counter" title="Dar Me gusta"><span class="heart-icon">♡</span> <span class="likes-count font-mono">0</span></div>
                    <div class="plays-counter font-mono"><span class="plays-count">0</span> plays</div>
                </div>
                <div class="share-button-container">
                    <a href="#" onclick="copyToClipboard('https://bvhankry.onrender.com', 'Regresión'); return false;" class="share-whatsapp">Compartir</a>
                </div>
            </article>
        </div>

        <div class="info-sections">
            <section id="music-info">
                <h2>Sobre el EP</h2>
                <p>El proyecto "Pulso" explora las profundidades del Dub Music desde Ecuador. Frecuencias bajas diseñadas para sistemas de sonido potentes y atmósferas que transportan al oyente.</p>
                <span class="tag-coming-soon">Streaming Everywhere</span>
            </section>
            <section id="videos">
                <h2>Visuales</h2>
                <p>Experiencias audiovisuales complementarias.</p>
                <span class="tag-coming-soon">Coming Soon</span>
            </section>
            <section id="shop">
                <h2>Mercancía</h2>
                <p>Soporta el arte directamente. Vinilos de edición limitada y diseños exclusivos.</p>
                <span class="tag-coming-soon">Tienda Oficial</span>
            </section>
        </div>

        <footer>
            <div class="footer-logo">BVHanKrY</div>
            <p>© 2026 BVHanKrY-Todos los derechos reservados. Diseñado con pasión por la música y el sonido.</p>
        </footer>
    </div>

    <!-- REPRODUCTOR GLOBAL MEJORADO -->
    <div class="global-player" id="globalPlayer">
        <!-- Izquierda: Vinilo -->
        <div class="gp-left">
            <div class="gp-cover" id="gpCover">
                <img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png" alt="Cover" id="gpCoverImg">
            </div>
            <div class="gp-info-text">
                <div class="gp-title" id="gpTitle">Título</div>
                <div class="gp-artist" id="gpArtist">Artista</div>
            </div>
        </div>
        
        <!-- Centro: Controles -->
        <div class="gp-center">
            <div class="gp-controls">
                <!-- Anterior (Clic = Anterior, Mantener = Retroceder) -->
                <button class="gp-btn" id="gpPrevBtn" title="Anterior / Retroceder">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                </button>
                
                <button class="gp-play-pause" id="gpPlayBtn">
                    <svg class="gp-icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    <svg class="gp-icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                </button>
                
                <!-- Siguiente (Clic = Siguiente, Mantener = Adelantar) -->
                <button class="gp-btn" id="gpNextBtn" title="Siguiente / Adelantar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                </button>
            </div>
            
            <div class="gp-progress-wrapper">
                <span id="gpCurrentTime">0:00</span>
                <div class="gp-progress-container" id="gpProgressContainer">
                    <div class="gp-progress-bar" id="gpProgressBar"></div>
                </div>
                <span id="gpDuration">0:00</span>
            </div>

            <!-- Acciones Extra (Me gusta y Compartir) -->
            <div class="gp-extra-actions">
                <button class="gp-action-btn" id="gpLikeBtn" title="Me gusta">
                    <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                </button>
                
                <!-- Menú de compartir centralizado (Mobile y PC) -->
                <div class="share-menu-container-center">
                    <button class="gp-action-btn" id="gpShareToggleBtn" title="Compartir">
                        <svg viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
                    </button>
                    <div class="share-dropdown" id="shareDropdown">
                        <a href="#" class="share-item" target="_blank" id="link-wa">
                            <svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                            WA
                        </a>
                        <a href="#" class="share-item" target="_blank" id="link-fb">
                            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12c0 5 3.66 9.13 8.44 9.88v-6.99H7.9V12h2.54V9.79c0-2.5 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56V12h2.78l-.45 2.89h-2.33v6.99C18.34 21.13 22 17 22 12c0-5.52-4.48-10-10-10Z"/></svg>
                            FB
                        </a>
                        <a href="#" class="share-item" target="_blank" id="link-tw">
                            <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                            X
                        </a>
                        <a href="#" class="share-item" target="_blank" id="link-tg">
                            <svg viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
                            TG
                        </a>
                        <a href="#" class="share-item" target="_blank" id="link-tt">
                            <svg viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93v6.16c0 2.52-1.12 4.84-2.9 6.24-1.72 1.36-3.92 1.71-6.04 1.12-3.32-.9-5.57-4.03-5.57-7.5 0-4.14 3.37-7.5 7.5-7.5.6 0 1.18.08 1.74.22v4.03c-1.93-.79-4.14.3-4.71 2.27-.47 1.63.35 3.43 1.86 4.15 1.36.65 3.01.22 3.95-.93.67-.82.93-1.88.79-2.94V.02h-.15z"/></svg>
                            TikTok
                        </a>
                        <a href="https://www.instagram.com/henryandresvill/" class="share-item" target="_blank">
                            <svg viewBox="0 0 24 24"><path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></svg>
                            Insta
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Derecha: Volumen (Solo PC) - Se eliminó el botón de compartir duplicado aquí -->
        <div class="gp-right pc-only">
            <!-- Volumen Desplegable Vertical -->
            <div class="volume-widget">
                <button class="gp-btn" id="volIconBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
                </button>
                <div class="volume-popover" id="volumePopover">
                    <div class="vol-slider-wrapper">
                        <input type="range" class="vol-slider-vertical" min="0" max="1" step="0.01" value="1" id="gpVolumeSlider">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Configuración Global
            let currentAudio = null;
            let currentCardId = null;
            let globalVolumeValue = 1.0;
            const cards = Array.from(document.querySelectorAll('.cancion-card'));
            
            // Elementos Globales
            const globalPlayer = document.getElementById('globalPlayer');
            const gpTitle = document.getElementById('gpTitle');
            const gpArtist = document.getElementById('gpArtist');
            const gpCoverImg = document.getElementById('gpCoverImg'); // Elemento IMG dentro del vinilo
            const gpPlayBtn = document.getElementById('gpPlayBtn');
            const gpIconPlay = gpPlayBtn.querySelector('.gp-icon-play');
            const gpIconPause = gpPlayBtn.querySelector('.gp-icon-pause');
            const gpProgressBar = document.getElementById('gpProgressBar');
            const gpProgressContainer = document.getElementById('gpProgressContainer');
            const gpCurrentTime = document.getElementById('gpCurrentTime');
            const gpDuration = document.getElementById('gpDuration');
            const gpVolSlider = document.getElementById('gpVolumeSlider');
            const gpNextBtn = document.getElementById('gpNextBtn');
            const gpPrevBtn = document.getElementById('gpPrevBtn');
            const gpLikeBtn = document.getElementById('gpLikeBtn');
            const shareToggleBtn = document.getElementById('gpShareToggleBtn');
            const shareDropdown = document.getElementById('shareDropdown');
            const volPopover = document.getElementById('volumePopover');

            // Imagen por defecto inicial
            const defaultCover = "https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png";
            
            const formatTime = (s) => isNaN(s) ? "0:00" : `${Math.floor(s/60)}:${Math.floor(s%60)<10?'0':''}${Math.floor(s%60)}`;

            // --- Toast ---
            function showToast(msg) {
                const container = document.getElementById('toast-container');
                if(container.querySelector('.toast.show')) return; 
                const t = document.createElement('div');
                t.className = 'toast show';
                t.textContent = msg;
                container.appendChild(t);
                setTimeout(() => { t.classList.remove('show'); setTimeout(()=>t.remove(), 300); }, 2500);
            }

            // --- Lógica Principal de Audio ---
            function playSong(cardId) {
                const card = document.getElementById(cardId);
                const audio = card.querySelector('audio');
                const coverUrl = card.dataset.cover || defaultCover;

                if (currentAudio === audio && !audio.paused) {
                    pauseSong();
                    return;
                }

                if (currentAudio && currentAudio !== audio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                    resetCardUI(currentCardId);
                }

                currentAudio = audio;
                currentCardId = cardId;
                
                // ACTUALIZAR IMAGEN DEL VINILO
                gpCoverImg.style.opacity = '0'; // Pequeño fade
                setTimeout(() => {
                    gpCoverImg.src = coverUrl;
                    gpCoverImg.style.opacity = '1';
                }, 150);

                if(audio.volume !== globalVolumeValue) audio.volume = globalVolumeValue;

                audio.play().then(() => {
                    updateCardUI(cardId, true);
                    updateGlobalPlayerUI(true);
                    globalPlayer.classList.add('active');
                    updateShareLinks(card.dataset.title);
                    updateGlobalLikeState(cardId);
                    
                    const playsEl = card.querySelector('.plays-count');
                    if(!currentAudio.dataset.counted) {
                        let count = parseInt(localStorage.getItem(`plays-${audio.dataset.id}`) || '0');
                        count++;
                        playsEl.textContent = count;
                        localStorage.setItem(`plays-${audio.dataset.id}`, count);
                        currentAudio.dataset.counted = 'true';
                    }
                }).catch(e => {
                    console.error("Error:", e);
                    showToast("Error al cargar audio");
                });
            }

            function pauseSong() {
                if(!currentAudio) return;
                currentAudio.pause();
                updateCardUI(currentCardId, false);
                updateGlobalPlayerUI(false);
            }

            function playNext() {
                if (!currentCardId) return;
                const currentIndex = cards.findIndex(c => c.id === currentCardId);
                const nextIndex = (currentIndex + 1) % cards.length;
                playSong(cards[nextIndex].id);
            }

            function playPrev() {
                if (!currentCardId) return;
                const currentIndex = cards.findIndex(c => c.id === currentCardId);
                const prevIndex = (currentIndex - 1 + cards.length) % cards.length;
                playSong(cards[prevIndex].id);
            }

            // --- UI Updates ---
            function resetCardUI(cardId) {
                if(!cardId) return;
                const card = document.getElementById(cardId);
                card.classList.remove('playing');
                card.querySelector('.progress-bar').style.width = '0%';
                card.querySelector('.icon-play').style.display = 'block';
                card.querySelector('.icon-pause').style.display = 'none';
                const floatBtn = card.querySelector('.btn-card-float svg');
                if(floatBtn) floatBtn.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }

            function updateCardUI(cardId, isPlaying) {
                if(!cardId) return;
                const card = document.getElementById(cardId);
                const btns = card.querySelectorAll('.btn-card, .btn-card-float');
                const playIcon = card.querySelector('.icon-play');
                const pauseIcon = card.querySelector('.icon-pause');
                const floatIcon = card.querySelector('.btn-card-float svg');

                if(isPlaying) {
                    card.classList.add('playing');
                    btns.forEach(b => {
                        b.style.backgroundColor = 'var(--accent-green)'; 
                        b.style.borderColor = 'var(--accent-green)';
                        b.style.color = '#000';
                        if(b.classList.contains('btn-card-float')) b.style.boxShadow = '0 8px 8px rgba(0,0,0,0.3)';
                    });
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'block';
                    if(floatIcon) floatIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
                } else {
                    card.classList.remove('playing');
                    btns.forEach(b => {
                        b.style.backgroundColor = ''; b.style.borderColor = ''; b.style.color = ''; b.style.boxShadow = '';
                    });
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    if(floatIcon) floatIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                }
            }

            function updateGlobalPlayerUI(isPlaying) {
                if(!currentAudio) return;
                const card = document.getElementById(currentCardId);
                
                gpTitle.textContent = card.dataset.title;
                gpArtist.textContent = card.dataset.artist;

                if(isPlaying) {
                    gpIconPlay.style.display = 'none';
                    gpIconPause.style.display = 'block';
                    document.getElementById('gpCover').classList.add('gp-cover-spin');
                } else {
                    gpIconPlay.style.display = 'block';
                    gpIconPause.style.display = 'none';
                    document.getElementById('gpCover').classList.remove('gp-cover-spin');
                }
            }

            // --- Lógica de "Press and Hold" CORREGIDA para Seek vs Cambio Canción ---
            function setupSeekButton(btn, songAction, direction) {
                let pressTimer;
                let isSeeking = false; // Flag para saber si estamos haciendo seek
                
                const startInteraction = (e) => {
                    if(e.type === 'touchstart') e.preventDefault(); // Evitar scroll en móvil
                    
                    isSeeking = false;
                    btn.style.color = '#fff'; // Feedback visual inmediato
                    
                    // Si sueltan antes de 200ms, es un clic corto -> Cambiar canción
                    // Si mantienen, es un seek -> Adelantar/Retroceder
                    pressTimer = setTimeout(() => {
                        isSeeking = true;
                        startSeek(direction);
                    }, 200);
                };
                
                const endInteraction = () => {
                    clearTimeout(pressTimer);
                    stopSeek(); // Detener el intervalo de avance
                    
                    // Importante: Si isSeeking es falso, significa que fue un clic corto
                    if (!isSeeking) {
                        songAction(); // Ejecutar función de cambiar canción (Next/Prev)
                    }
                    
                    btn.style.color = ''; // Reset color
                };

                btn.addEventListener('mousedown', startInteraction);
                btn.addEventListener('touchstart', startInteraction);
                
                btn.addEventListener('mouseup', endInteraction);
                btn.addEventListener('mouseleave', endInteraction);
                btn.addEventListener('touchend', endInteraction);
            }

            let seekInterval;
            function startSeek(direction) {
                // direction: 1 (forward), -1 (backward)
                seekInterval = setInterval(() => {
                    if(currentAudio) {
                        currentAudio.currentTime += direction * 2; // +/- 2 segundos cada 100ms
                    }
                }, 100);
            }
            function stopSeek() {
                clearInterval(seekInterval);
            }

            // Inicializar botones de control
            setupSeekButton(gpPrevBtn, playPrev, -1); // -1 retrocede
            setupSeekButton(gpNextBtn, playNext, 1);  // 1 adelanta

            // --- Progreso y Tiempo ---
            
            const updateTime = () => {
                if(!currentAudio) return;
                const pct = (currentAudio.currentTime / currentAudio.duration) * 100;
                if(gpProgressBar) gpProgressBar.style.width = `${pct}%`;
                if(gpCurrentTime) gpCurrentTime.innerText = formatTime(currentAudio.currentTime);
                
                // Actualizar tarjeta individual
                const card = document.getElementById(currentCardId);
                if(card) {
                    card.querySelector('.progress-bar').style.width = `${pct}%`;
                    card.querySelector('.time-display').innerText = formatTime(currentAudio.currentTime);
                }
                if(currentAudio.paused || currentAudio.ended) return;
                requestAnimationFrame(updateTime);
            };

            // Observer para asignar eventos a nuevos audios dinámicamente
            const observer = new MutationObserver(() => {
                const audios = document.querySelectorAll('audio');
                audios.forEach(audio => {
                    if(!audio.onloadedmetadata) {
                        audio.onloadedmetadata = () => {
                            if(audio === currentAudio && gpDuration) gpDuration.innerText = formatTime(audio.duration);
                        };
                        audio.onended = playNext;
                    }
                });
            });
            observer.observe(document.body, { childList: true, subtree: true });
            
            // Loop de tiempo global
            requestAnimationFrame(updateTime);

            // Click barra de progreso
            gpProgressContainer.addEventListener('click', (e) => {
                if(!currentAudio) return;
                const rect = gpProgressContainer.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const pct = x / rect.width;
                currentAudio.currentTime = pct * currentAudio.duration;
            });

            // Control Play Global
            gpPlayBtn.addEventListener('click', () => {
                if(currentAudio) {
                    if(currentAudio.paused) playSong(currentCardId);
                    else pauseSong();
                } else if(cards.length > 0) {
                    playSong(cards[0].id);
                }
            });

            // Click en tarjetas
            cards.forEach(card => {
                const playBtns = card.querySelectorAll('.btn-card, .btn-card-float');
                playBtns.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        playSong(card.id);
                    });
                });
                
                // Click en barra de progreso de tarjeta
                card.querySelector('.progress-container').addEventListener('click', (e) => {
                    e.stopPropagation();
                    const audio = card.querySelector('audio');
                    const rect = card.querySelector('.progress-container').getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const pct = x / rect.width;
                    audio.currentTime = pct * audio.duration;
                });
            });

            // Likes
            function updateGlobalLikeState(cardId) {
                const card = document.getElementById(cardId);
                const isLiked = localStorage.getItem(`like-${cardId}`) === 'true';
                const icon = gpLikeBtn.querySelector('svg');
                
                if(isLiked) {
                    gpLikeBtn.classList.add('active-like');
                    icon.style.fill = 'var(--accent-green)';
                } else {
                    gpLikeBtn.classList.remove('active-like');
                    icon.style.fill = 'currentColor';
                }
            }

            // Manejador de Likes (Global y Tarjeta)
            function toggleLike(cardId) {
                const card = document.getElementById(cardId);
                const likeState = localStorage.getItem(`like-${cardId}`) === 'true';
                const newState = !likeState;
                localStorage.setItem(`like-${cardId}`, newState);
                
                // Actualizar UI tarjeta
                const heart = card.querySelector('.heart-icon');
                const countSpan = card.querySelector('.likes-count');
                let count = parseInt(countSpan.innerText);
                
                if(newState) {
                    heart.classList.add('liked');
                    heart.textContent = '♥';
                    count++;
                    showToast("Añadido a Me gusta");
                } else {
                    heart.classList.remove('liked');
                    heart.textContent = '♡';
                    count--;
                }
                countSpan.innerText = count;
                
                // Actualizar UI Global si es la actual
                if(currentCardId === cardId) updateGlobalLikeState(cardId);
            }

            cards.forEach(card => {
                card.querySelector('.likes-counter').addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleLike(card.id);
                });
            });

            gpLikeBtn.addEventListener('click', () => {
                if(currentCardId) toggleLike(currentCardId);
            });

            // Volumen
            gpVolSlider.addEventListener('input', (e) => {
                const val = e.target.value;
                globalVolumeValue = val;
                if(currentAudio) currentAudio.volume = val;
            });

            // Share Links
            function updateShareLinks(title) {
                const text = `Escucha ${title} en BVHanKrY Music`;
                const url = 'https://bvhankry.onrender.com';
                
                document.getElementById('link-wa').href = `https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`;
                document.getElementById('link-fb').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
                document.getElementById('link-tw').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
                document.getElementById('link-tg').href = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
                document.getElementById('link-tt').href = `https://www.tiktok.com/`; // TikTok API es limitada, dejamos link genérico
            }

            window.copyToClipboard = (url, title) => {
                navigator.clipboard.writeText(`${title} - ${url}`).then(() => showToast("Enlace copiado"));
            };

            // Toggle Share Dropdown
            shareToggleBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                shareDropdown.classList.toggle('active');
            });

            // Cerrar dropdowns al hacer click fuera
            document.addEventListener('click', (e) => {
                if(!shareDropdown.contains(e.target) && e.target !== shareToggleBtn) {
                    shareDropdown.classList.remove('active');
                }
            });

            // Scroll Navbar
            let lastScroll = 0;
            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                const nav = document.querySelector('.main-nav');
                if (currentScroll > lastScroll && currentScroll > 100) {
                    nav.classList.add('hidden-nav');
                } else {
                    nav.classList.remove('hidden-nav');
                }
                lastScroll = currentScroll;
            });
        });
        const toggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        toggle.addEventListener('click', () => {
        navLinks.classList.toggle('active');
        });
    </script>
</body>
</html>
