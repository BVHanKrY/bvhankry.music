<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MQQQ48NX');</script>
<!-- End Google Tag Manager -->
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BVHanKrY - Música Oficial</title>

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <link rel="icon" href="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/iconos/pesta%C3%B1a%20simbo.png" type="image/png">

  <style>
    :root{
      --bg-body:#121212;
      --bg-gradient:linear-gradient(to bottom, rgba(18,18,18,0.85) 0%, rgba(18,18,18,0.95) 40%, #121212 100%);
      --bg-card:#181818;
      --bg-card-hover:#282828;
      --text-primary:#ffffff;
      --text-secondary:#b3b3b3;
      --accent-green:#1ed760;
      --accent-hover:#1fdf64;
      --nav-height:64px;
      --player-height:110px;
      --vinyl-size:56px;
    }

    *{margin:0;padding:0;box-sizing:border-box;}
    html{scroll-behavior:smooth;}
    body{
      font-family:'Roboto',sans-serif;
      background-color:var(--bg-body);
      background-image:var(--bg-gradient), url(https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/ChatGPT%20Image%2030%20dic%202025%2C%2010_59_54%20a.m..png);
      background-attachment:fixed;
      background-size:cover;
      background-position:center;
      color:var(--text-primary);
      min-height:100vh;
      padding-bottom:calc(var(--player-height) + 20px);
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
    }

    /* NAV */
    .main-nav{
      background-color:rgba(18,18,18,0.95);
      backdrop-filter:blur(12px);
      height:var(--nav-height);
      position:fixed;
      top:0;left:0;right:0;
      z-index:1000;
      border-bottom:1px solid rgba(255,255,255,0.05);
      display:flex;
      align-items:center;
      transition:transform 0.25s ease;
    }
    .main-nav.hidden-nav{ transform: translateY(-100%); }

    .nav-container{
      display:flex;
      align-items:center;
      justify-content:space-between;
      width:100%;
      padding:0 32px;
      max-width:1600px;
      margin:0 auto;
      position:relative;
      gap:16px;
    }

    .logo img{ height:32px; border-radius:4px; }
    .nav-links{ display:flex; gap:32px; list-style:none; }
    .nav-links a{
      color:var(--text-secondary);
      text-decoration:none;
      font-weight:700;
      font-size:0.9rem;
      transition:color .2s;
    }
    .nav-links a:hover, .nav-links a.active{ color:var(--text-primary); }

    .social-links{ display:flex; gap:20px; list-style:none; }
    .social-links a img{ height:20px; opacity:.7; transition:all .2s; }
    .social-links a:hover img{ opacity:1; transform:scale(1.1); }

    .menu-toggle{
      display:none;
      background:none;
      border:none;
      color:#fff;
      font-size:1.8rem;
      cursor:pointer;
    }

    /* LAYOUT */
    .container{
      max-width:1400px;
      margin:calc(var(--nav-height) + 40px) auto 0;
      padding:0 32px;
      position:relative;
    }

    header{
      padding:40px 0;
      display:flex;
      align-items:flex-end;
      gap:24px;
      margin-bottom:40px;
    }
    .header-art{
      width:232px;height:232px;
      background-image:url('https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png');
      background-size:cover;background-position:center;
      box-shadow:0 8px 50px rgba(0,0,0,0.6);
      border-radius:18px;
      flex-shrink:0;
      border:1px solid rgba(255,255,255,0.1);
      position:relative;
      overflow:hidden;
      box-shadow:
  0 12px 40px rgba(0,0,0,0.55),
  0 0 0 1px rgba(255,255,255,0.08);
    }
    .header-art::after{
      content:'';
      position:absolute;inset:0;
      background:linear-gradient(135deg, rgba(255,255,255,0.12) 0%, transparent 100%);
      opacity:0;transition:opacity .3s;
      pointer-events:none;
    }
    .header-art:hover::after{opacity:1;}

    .header-type{ font-size:0.8rem; text-transform:uppercase; font-weight:700; margin-bottom:8px; }
    header h1{
      font-size:clamp(2.5rem, 6vw, 5rem);
      font-weight:900;
      line-height:1;
      letter-spacing:-2px;
      text-shadow:0 2px 10px rgba(0,0,0,.5);
    }
    header p{ font-size:0.9rem; color:var(--text-secondary); margin-top:10px; }

    /* SCROLL FADE */
    .scroll-fade{
      opacity:0;
      transform: translateY(18px);
      transition: opacity .6s ease, transform .6s ease;
    }
    .scroll-fade.visible{
      opacity:1;
      transform: translateY(0);
    }

    /* STREAMING SECTION */
    .streaming{
      margin-bottom:40px;
      padding:24px;
      border:1px solid rgba(255,255,255,0.05);
      background:rgba(255,255,255,0.02);
      border-radius:8px;
      backdrop-filter:blur(5px);
    }
    .streaming h2{
      font-size:1.2rem;
      margin-bottom:12px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .streaming h2::before{
      content:'';
      width:4px;height:18px;
      background:var(--accent-green);
      border-radius:2px;
      display:block;
    }
    .streaming .embed{
      display:grid;
      gap:16px;
      margin-top:12px;
    }
    .streaming iframe{
      width:100%;
      border:0;
      border-radius:12px;
      overflow:hidden;
      background:#000;
    }

    /* SONGS GRID */
    .songs-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(280px,1fr));
      gap:24px;
      margin-bottom:60px;
    }
    .cancion-card{
      background:var(--bg-card);
      border-radius:8px;
      padding:16px;
      border:1px solid transparent;
      transition:background-color .3s, transform .2s, box-shadow .2s, border-color .2s;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      position:relative;
    }
    .cancion-card:hover{
      background:var(--bg-card-hover);
      transform:translateY(-4px);
      border-color:rgba(255,255,255,0.1);
      box-shadow:0 10px 30px rgba(0,0,0,0.3);
    }
    .floating-play-btn{
      position:absolute;
      right:20px;
      bottom:90px;
      width:48px;height:48px;
      border-radius:50%;
      background:var(--accent-green);
      box-shadow:0 8px 8px rgba(0,0,0,0.3);
      display:flex;align-items:center;justify-content:center;
      opacity:0;
      transform:translateY(8px);
      transition:all .3s ease;
      border:none;
      cursor:pointer;
      z-index:10;
    }
    .cancion-card:hover .floating-play-btn{ opacity:1; transform:translateY(0); }
    .floating-play-btn:hover{ background:var(--accent-hover); transform:scale(1.05) !important; }
    .floating-play-btn svg{ fill:#000;width:24px;height:24px;margin-left:2px; }

    .song-header-row{ display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:12px; }
    .song-title-text{ font-size:1rem; font-weight:700; max-width:200px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .song-artist-text{ font-size:.85rem; color:var(--text-secondary); }

    .mini-visualizer{ display:flex; gap:3px; height:16px; align-items:flex-end; margin-top:5px; opacity:0; transition:opacity .3s; }
    .cancion-card.playing .mini-visualizer{ opacity:1; }
    .bar{ width:4px; background:var(--accent-green); border-radius:2px; animation:none; height:20%; }
    .cancion-card.playing .bar{ animation:eq .6s infinite ease-in-out alternate; }
    .bar:nth-child(2){ animation-delay:.1s; }
    .bar:nth-child(3){ animation-delay:.2s; }
    .bar:nth-child(4){ animation-delay:.3s; }
    @keyframes eq{ from{height:20%;} to{height:100%;} }

    .player-wrapper{ margin-top:auto; padding-top:10px; }
    .audio-controls-row-1{ display:flex; align-items:center; gap:12px; }
    .inline-play-btn{
      width:32px;height:32px;
      background:transparent;
      border:1px solid var(--text-secondary);
      border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      cursor:pointer;
      transition:all .2s;
      color:#fff;
      flex-shrink:0;
    }
    .inline-play-btn:hover{ border-color:#fff; transform:scale(1.1); }
    .inline-play-btn svg{ width:12px;height:12px; fill:currentColor; pointer-events:none; }
    .cancion-card.playing .inline-play-btn{ border-color:var(--accent-green); color:var(--accent-green); }

    .progress-container{ flex:1; height:4px; background:#535353; border-radius:2px; overflow:hidden; cursor:pointer; }
    .progress-bar{ height:100%; width:0%; background:#fff; transition:width .1s linear; }
    .cancion-card.playing .progress-bar{ background:var(--accent-green); }
    .time-display{ font-size:.75rem; color:var(--text-secondary); min-width:38px; text-align:right; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    .song-stats{ display:flex; justify-content:space-between; align-items:center; margin-top:12px; font-size:.75rem; color:var(--text-secondary); }
    .likes-counter{ cursor:pointer; display:flex; align-items:center; gap:6px; user-select:none; }
    .likes-counter:hover{ color:#fff; }
    .heart-icon{ font-size:14px; }
    .heart-icon.liked{ color:var(--accent-green); }

    .share-button-container{ margin-top:16px; }
    .share-whatsapp{
      font-size:.75rem;
      color:var(--text-secondary);
      text-decoration:none;
      text-transform:uppercase;
      font-weight:700;
      letter-spacing:1px;
      border-bottom:1px solid transparent;
      transition:.2s;
    }
    .share-whatsapp:hover{ border-bottom-color:var(--text-primary); color:var(--text-primary); }

    /* INFO SECTIONS */
    .info-sections{ display:grid; grid-template-columns:repeat(auto-fit, minmax(300px,1fr)); gap:24px; margin-bottom:60px; }
    section{
      padding:24px;
      border:1px solid rgba(255,255,255,0.05);
      background:rgba(255,255,255,0.02);
      border-radius:8px;
      backdrop-filter:blur(5px);
    }
    section h2{
      font-size:1.2rem;
      margin-bottom:12px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    section h2::before{
      content:'';
      width:4px;height:18px;
      background:var(--accent-green);
      border-radius:2px;
      display:block;
    }
    section p{ color:var(--text-secondary); font-size:.9rem; line-height:1.6; }
    .tag-coming-soon{
      background:#333;color:#fff;
      padding:4px 10px;
      font-size:.7rem;
      font-weight:700;
      border-radius:12px;
      display:inline-block;
      margin-top:10px;
    }

    /* FOOTER */
    footer{ margin-top:80px; padding:40px 32px; border-top:1px solid rgba(255,255,255,0.1); text-align:center; }
    footer p{ font-size:.85rem; color:var(--text-secondary); margin-bottom:8px; }
    .footer-logo{ font-size:1.5rem; font-weight:900; letter-spacing:-1px; margin-bottom:10px; display:inline-block; }

    /* GLOBAL PLAYER */
    .global-player{
      position:fixed;
      bottom:0;left:0;width:100%;
      background:#181818;
      border-top:1px solid #282828;
      height:var(--player-height);
      padding:0 24px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      z-index:2000;
      transform:translateY(100%);
      transition:transform .35s cubic-bezier(0.2,0.8,0.2,1);
      box-shadow:0 -4px 20px rgba(0,0,0,0.4);
      backdrop-filter:blur(10px);
    }
    .global-player.active{ transform:translateY(0); }

    .gp-left{
      display:flex;
      align-items:center;
      gap:12px;
      width:20%;
      max-width:260px;
    }
    .gp-cover{
      width:var(--vinyl-size); height:var(--vinyl-size);
      border-radius:50%;
      background:#000;
      border:2px solid #333;
      position:relative;
      overflow:hidden;
      cursor:pointer;
      box-shadow:0 0 10px rgba(0,0,0,0.5);
      flex-shrink:0;
    }
    .gp-cover img{ width:100%; height:100%; object-fit:cover; border-radius:50%; position:relative; z-index:2; transition:opacity .25s; }
    .gp-cover::before{
      content:'';
      position:absolute; inset:0;
      border-radius:50%;
      background:
        radial-gradient(circle, transparent 30%, rgba(0,0,0,0.3) 31%, transparent 32%),
        repeating-radial-gradient(#111 0, #111 1px, #222 2px, #222 3px);
      z-index:3;
      pointer-events:none;
      box-shadow:inset 0 0 10px rgba(0,0,0,0.8);
    }
    .gp-cover::after{
      content:'';
      position:absolute;
      top:-50%; left:-50%;
      width:200%; height:200%;
      background:linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0) 100%);
      transform:rotate(30deg) translateY(-100%);
      transition:transform .6s ease;
      z-index:4;
      pointer-events:none;
    }
    .gp-cover:hover::after{ transform:rotate(30deg) translateY(100%); }
    .gp-cover-spin{ animation:spin 4s linear infinite; }
    @keyframes spin{ 100%{ transform:rotate(360deg);} }

    .gp-info-text{ display:flex; flex-direction:column; overflow:hidden; }
    .gp-title{ font-size:.9rem; font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .gp-artist{ font-size:.75rem; color:var(--text-secondary); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .gp-center{
      flex:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      max-width:50%;
      padding:0 20px;
    }
    .gp-controls{ display:flex; align-items:center; gap:24px; margin-bottom:8px; }
    .gp-btn{
      background:none;border:none;
      color:var(--text-secondary);
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      transition:.2s;
      padding:4px;
    }
    .gp-btn:hover{ color:#fff; transform:scale(1.1); }
    .gp-btn:active{ transform:scale(.95); }

    .gp-play-pause{
      width:36px;height:36px;
      background:#fff;
      border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      color:#000;
      cursor:pointer;
      border:none;
      box-shadow:0 4px 12px rgba(0,0,0,0.3);
      transition:.2s;
    }
    .gp-play-pause:hover{ background:var(--accent-green); transform:scale(1.1); }
    .gp-play-pause svg{ width:16px;height:16px; fill:currentColor; }

    .gp-progress-wrapper{
      width:100%;
      display:flex;
      align-items:center;
      gap:12px;
      font-size:.75rem;
      color:var(--text-secondary);
      font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    .gp-progress-container{
      flex:1;
      height:5px;
      background:#535353;
      border-radius:3px;
      cursor:pointer;
      position:relative;
    }
    .gp-progress-bar{
      height:100%;
      width:0%;
      background:var(--accent-green);
      border-radius:3px;
      box-shadow:0 0 10px var(--accent-green);
      position:relative;
    }

    .gp-extra-actions{ display:flex; gap:16px; margin-top:6px; }
    .gp-action-btn{
      background:none;border:none;
      color:var(--text-secondary);
      cursor:pointer;
      transition:.2s;
      padding:2px;
      display:flex; align-items:center; justify-content:center;
    }
    .gp-action-btn:hover{ color:#fff; transform:scale(1.1); }
    .gp-action-btn.active-like{ color:var(--accent-green); }
    .gp-action-btn svg{ width:18px;height:18px; fill:currentColor; }

    .share-menu-container-center{ position:relative; }
    .share-dropdown{
      position:absolute;
      bottom:140%;
      right:0;
      background:#282828;
      border-radius:12px;
      padding:10px;
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;
      box-shadow:0 5px 20px rgba(0,0,0,0.5);
      opacity:0;
      pointer-events:none;
      transform:translateY(10px) scale(.95);
      transition:.2s ease;
      z-index:50;
      min-width:200px;
    }
    .share-dropdown.active{
      opacity:1;
      pointer-events:auto;
      transform:translateY(0) scale(1);
    }
    .share-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
      color:#fff;
      text-decoration:none;
      font-size:.7rem;
      transition:.2s;
    }
    .share-item:hover{ transform:scale(1.1); color:var(--accent-green); }
    .share-item svg{ width:24px;height:24px; fill:currentColor; }

    .gp-right{ width:25%; display:flex; justify-content:flex-end; gap:16px; }
    .volume-widget{ position:relative; display:flex; align-items:center; }
    .volume-popover{
      position:absolute; bottom:120%; right:0;
      background:#282828;
      padding:15px 10px;
      border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      box-shadow:0 5px 20px rgba(0,0,0,0.5);
      opacity:0;
      pointer-events:none;
      transform:translateY(10px);
      transition:.25s cubic-bezier(0.2,0.8,0.2,1);
      height:120px;
    }
    .volume-widget:hover .volume-popover{ opacity:1; pointer-events:auto; transform:translateY(0); }
    input[type=range].vol-slider-vertical{
      -webkit-appearance:none;
      width:100px;height:4px;
      background:#555;
      border-radius:2px;
      outline:none;
      transform:rotate(-90deg);
      transform-origin:center;
      cursor:pointer;
    }
    input[type=range].vol-slider-vertical::-webkit-slider-thumb{
      -webkit-appearance:none;
      width:12px;height:12px;
      background:#fff;
      border-radius:50%;
      cursor:pointer;
      box-shadow:0 0 5px rgba(0,0,0,0.5);
    }

    /* TOAST */
    #toast-container{
      position:fixed;
      bottom:120px;
      left:50%;
      transform:translateX(-50%);
      z-index:3000;
      pointer-events:none;
      width:90%;
      max-width:320px;
      text-align:center;
    }
    .toast{
      background:#2e77d0;
      color:#fff;
      padding:12px 24px;
      border-radius:24px;
      font-size:.9rem;
      font-weight:500;
      box-shadow:0 4px 12px rgba(0,0,0,0.5);
      opacity:0;
      transform:translateY(10px);
      transition:.3s;
      margin-bottom:10px;
      white-space:nowrap;
    }
    .toast.show{ opacity:1; transform:translateY(0); }

    /* MOBILE */
    @media (max-width: 768px){
      .container{ padding:0 16px; margin-top:calc(var(--nav-height) + 20px); }
      header{ flex-direction:column; align-items:flex-start; padding:20px 0; }
      .header-art{ width:160px; height:160px; }

      /* Header EP en fila SOLO en móvil */
    @media (max-width: 768px) {
  header {
    flex-direction: row;
    align-items: center;
    gap: 14px;
  }

  /* Portada EP */
  .header-art {
    width: 88px;
    height: 88px;
    flex-shrink: 0;
  }

  /* Texto a la derecha */
  .header-text {
    justify-content: center;
  }

  .header-type {
    font-size: 0.7rem;
    margin-bottom: 4px;
  }

  .header-text h1 {
    font-size: 1.8rem;
    line-height: 1.05;
    margin: 0;
  }

  header p {
    font-size: 0.75rem;
    line-height: 1.3;
    margin-top: 6px;
  }
}
      /* Portada EP más pequeña SOLO en móvil */
    @media (max-width: 768px) {
      .header-art {
       width: 100px;
       height: 100px;
       border-radius: 18px; /* mantiene look premium */
  }
}
      /* NAV: Logo - Social - Burger */
      .nav-container{ padding:0 14px; }
      .menu-toggle{ display:block; }
      .nav-links{
        display:none;
        position:absolute;
        top:var(--nav-height);
        left:0;
        width:100%;
        background:rgba(0,0,0,0.92);
        padding:12px 0;
        flex-direction:column;
        gap:0;
        z-index:1001;
      }
      .nav-links.active{ display:flex; }
      .nav-links li{ text-align:center; padding:10px 0; }
      .social-links{ gap:14px; }

      /* Player móvil compacto (sin duplicar tiempos) */
      .global-player{
        height:auto;
        padding:10px 12px;
        gap:10px;
      }
      .gp-left{
        width:auto;
        max-width:none;
        gap:10px;
      }
      .gp-cover{ width:40px; height:40px; }
      .gp-info-text{ max-width:44vw; }
      .gp-title{
        font-size:0.82rem;
        font-weight:900;
      }
      .gp-artist{
        font-size:0.72rem;
        font-weight:700;
      }
      .gp-center{ max-width:none; padding:0; }
      #gpDuration{ display:none; } /* evita doble 0:00 aplastando */
      .gp-right{ display:none; }
    }

    /* --- Streaming layout --- */
.embed-grid{
  display: grid;
  gap: 18px;
}

/* Estilo general para iframes */
.embed-grid iframe{
  width: 100%;
  border: 0;
  border-radius: 14px;
  overflow: hidden;
}

/* MOBILE: uno debajo del otro (como quieres) */
@media (max-width: 768px){
  .embed-grid{
    grid-template-columns: 1fr;
  }
  .embed-spotify iframe{ height: 152px; }
  .yt-box{ aspect-ratio: 16 / 9; }
}

/* PC: Spotify izquierda / YouTube derecha */
@media (min-width: 769px){
  .embed-grid{
    grid-template-columns: 1fr 1fr; /* 2 columnas */
    align-items: start;
  }

  /* Spotify un poco más alto en PC para que se vea mejor */
  .embed-spotify iframe{
    height: 352px;
  }

  /* YouTube SIEMPRE 16:9 (portada completa) */
  .yt-box{
    width: 100%;
    aspect-ratio: 16 / 9;
    border-radius: 14px;
    overflow: hidden;
    background: #000;
  }
  .yt-box iframe{
    width: 100%;
    height: 100%;
    display: block;
  }
}

      /* =========================
   SCROLL FADE PRO (Cinemático)
   ========================= */
.scroll-fade{
  opacity: 0;
  transform: translateY(22px) scale(0.985);
  filter: blur(10px);
  transition:
    opacity 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    transform 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    filter 900ms cubic-bezier(0.2, 0.8, 0.2, 1);
  will-change: opacity, transform, filter;
}

.scroll-fade.visible{
  opacity: 1;
  transform: translateY(0) scale(1);
  filter: blur(0);
}

    /* Streaming: entrada más cinematográfica */
#streaming-section.scroll-fade{
  transition-delay: 140ms;
}

#streaming-section.scroll-fade.visible{
  box-shadow:
    0 18px 60px rgba(0,0,0,0.55),
    0 0 0 1px rgba(255,255,255,0.06),
    0 0 22px rgba(30,215,96,0.12);
}

    /* Stagger interno (solo cuando el streaming ya está visible) */
#streaming-section.scroll-fade .embed-item{
  opacity: 0;
  transform: translateY(14px) scale(0.99);
  filter: blur(8px);
  transition:
    opacity 700ms cubic-bezier(0.2, 0.8, 0.2, 1),
    transform 700ms cubic-bezier(0.2, 0.8, 0.2, 1),
    filter 700ms cubic-bezier(0.2, 0.8, 0.2, 1);
  will-change: opacity, transform, filter;
}

/* Cuando aparece: se activan */
#streaming-section.scroll-fade.visible .embed-item{
  opacity: 1;
  transform: translateY(0) scale(1);
  filter: blur(0);
}

/* Delay escalonado */
#streaming-section.scroll-fade.visible .embed-spotify{ transition-delay: 120ms; }
#streaming-section.scroll-fade.visible .embed-youtube{ transition-delay: 240ms; }

      @media (max-width: 768px){
  .scroll-fade{
    filter: none;
    transform: translateY(16px);
  }
}
 /* =========================CINEMA PRO: Streaming========================= */

/* Base (si ya tienes scroll-fade, puedes dejarlo; esto lo mejora) */
    
.scroll-fade{
  opacity: 0;
  transform: translateY(22px) scale(0.985);
  filter: blur(10px);
  transition:
    opacity 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    transform 900ms cubic-bezier(0.2, 0.8, 0.2, 1),
    filter 900ms cubic-bezier(0.2, 0.8, 0.2, 1);
  will-change: opacity, transform, filter;
}
.scroll-fade.visible{
  opacity: 1;
  transform: translateY(0) scale(1);
  filter: blur(0);
}

/* Streaming: marco pro + brillo */
#streaming-section{
  position: relative;
  overflow: hidden;
  border-radius: 14px;
}

/* Glow “cinema” al hacerse visible */
#streaming-section.visible{
  box-shadow:
    0 18px 70px rgba(0,0,0,0.55),
    0 0 0 1px rgba(255,255,255,0.06),
    0 0 26px rgba(30,215,96,0.14);
}

/* Capa de luz animada (pulse) */
#streaming-section::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius: 16px;
  pointer-events:none;
  opacity: 0;
  background:
    radial-gradient(600px 140px at 20% 10%, rgba(30,215,96,0.18), transparent 60%),
    radial-gradient(520px 160px at 90% 40%, rgba(255,255,255,0.08), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,0.03), transparent 35%);
  transform: translateY(14px);
  filter: blur(10px);
  transition: opacity 700ms ease, transform 900ms cubic-bezier(0.2,0.8,0.2,1);
}
#streaming-section.visible::before{
  opacity: 1;
  transform: translateY(0);
  animation: streamGlow 2.6s ease-in-out infinite;
}
@keyframes streamGlow{
  0%,100%{ filter: blur(10px); opacity: 0.85; }
  50%{ filter: blur(14px); opacity: 1; }
}

/* Reveal del título (h2) */
#streaming-section h2{
  position: relative;
  display: inline-block;
  transform: translateY(12px);
  opacity: 0;
  transition: transform 700ms cubic-bezier(0.2,0.8,0.2,1), opacity 700ms ease;
}
#streaming-section.visible h2{
  transform: translateY(0);
  opacity: 1;
  transition-delay: 120ms;
}

/* Línea verde entra con “wipe” */
#streaming-section h2::before{
  content:"";
  position:absolute;
  left: -12px;
  top: 6px;
  width: 4px;
  height: 18px;
  border-radius: 2px;
  background: var(--accent-green);
  transform: scaleY(0);
  transform-origin: top;
  transition: transform 700ms cubic-bezier(0.2,0.8,0.2,1);
}
#streaming-section.visible h2::before{
  transform: scaleY(1);
  transition-delay: 180ms;
}

/* Stagger interno (Spotify y YouTube entran escalonados) */
#streaming-section .embed-item{
  opacity: 0;
  transform: translateY(16px) scale(0.99);
  filter: blur(8px);
  transition:
    opacity 700ms cubic-bezier(0.2,0.8,0.2,1),
    transform 700ms cubic-bezier(0.2,0.8,0.2,1),
    filter 700ms cubic-bezier(0.2,0.8,0.2,1);
  will-change: opacity, transform, filter;
}

#streaming-section.visible .embed-item{
  opacity: 1;
  transform: translateY(0) scale(1);
  filter: blur(0);
}

#streaming-section.visible .embed-spotify{ transition-delay: 160ms; }
#streaming-section.visible .embed-youtube{ transition-delay: 280ms; }

/* Parallax suave (solo PC) */
@media (min-width: 769px){
  #streaming-section .embed-item{
    will-change: transform;
  }
}

/* Anti-lag móvil: sin blur pesado */
@media (max-width: 768px){
  .scroll-fade{ filter:none; transform: translateY(16px); }
  #streaming-section::before{ filter:none; }
}
    /* Ocultar SOLO el botón verde flotante de las tarjetas */
.floating-play-btn {
  display: none !important;
}
  </style>
</head>

<body>
  
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MQQQ48NX"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  
  <!-- NAV -->
  <nav class="main-nav">
    <div class="nav-container">
      <a href="#" class="logo">
        <img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/iconos/pesta%C3%B1a%20simbo.png" alt="Logo BVHanKrY">
      </a>

      <ul class="social-links" aria-label="Redes sociales">
        <li><a href="https://www.instagram.com/henryandresvill/" target="_blank" aria-label="Instagram"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/instagram.png" alt=""></a></li>
        <li><a href="https://wa.link/uuajw5" target="_blank" aria-label="WhatsApp"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/whatsapp.png" alt=""></a></li>
        <li><a href="https://www.youtube.com/channel/UCJrxTphZnI8Rm_GTyCJp44g" target="_blank" aria-label="YouTube"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/youtube.png" alt=""></a></li>
        <li><a href="https://open.spotify.com/intl-es/artist/0IPDl4adPnkF6LaoEyUwDl" target="_blank" aria-label="Spotify"><img src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/multimedia/spotify.png" alt=""></a></li>
      </ul>

      <button class="menu-toggle" aria-label="Abrir menú" aria-expanded="false">☰</button>

      <ul class="nav-links" aria-label="Secciones">
        <li><a href="#music" class="active">Música</a></li>
        <li><a href="#videos">Videos</a></li>
        <li><a href="#shop">Shop</a></li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <header>
      <div class="header-art" aria-label="Portada EP"></div>
      <div class="header-text">
        <span class="header-type">EP • 2026</span>
        <h1>BVHanKrY</h1>
        <p>DUB Music • Ecuador • BVros Productions</p>
      </div>
    </header>

    <!-- SONGS -->
    <div class="songs-grid" id="music">
      <!-- 1 -->
      <article class="cancion-card" id="card-navi" data-title="Tinkuy" data-artist="BVHanKrY"
        data-cover="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png">
        <button class="floating-play-btn btn-card-float" aria-label="Reproducir">
          <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        </button>

        <div class="song-header-row">
          <div>
            <div class="song-title-text">Tinkuy</div>
            <div class="song-artist-text">BVHanKrY</div>
          </div>
          <div class="mini-visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </div>

        <div class="player-wrapper">
          <div class="audio-controls-row-1">
            <button class="inline-play-btn btn-card" aria-label="Reproducir">
              <svg class="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
              <svg class="icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <div class="progress-container"><div class="progress-bar"></div></div>
            <div class="time-display">0:00</div>
          </div>
        </div>

        <audio src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/main/audio/tinkuy.mp3" preload="metadata" data-track-title="tinkuy" data-id="tinkuy"></audio>
        
          
        <div class="song-stats">
          <div class="likes-counter" title="Dar Me gusta"><span class="heart-icon">♡</span> <span class="likes-count">0</span></div>
          <div class="plays-counter"><span class="plays-count">0</span> plays</div>
        </div>

        <div class="share-button-container">
          <a href="#" onclick="copyToClipboard('https://bvhankry.onrender.com','Tinkuy'); return false;" class="share-whatsapp">Compartir</a>
        </div>
      </article>

      <!-- 2 -->
      <article class="cancion-card" id="card-subtle_gad" data-title="Subtle Gad" data-artist="BVHanKrY"
        data-cover="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png">
        <button class="floating-play-btn btn-card-float" aria-label="Reproducir">
          <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        </button>

        <div class="song-header-row">
          <div>
            <div class="song-title-text">Subtle Gad</div>
            <div class="song-artist-text">BVHanKrY</div>
          </div>
          <div class="mini-visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </div>

        <div class="player-wrapper">
          <div class="audio-controls-row-1">
            <button class="inline-play-btn btn-card" aria-label="Reproducir">
              <svg class="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
              <svg class="icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <div class="progress-container"><div class="progress-bar"></div></div>
            <div class="time-display">0:00</div>
          </div>
        </div>

        <audio src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/main/audio/Subtle%20gad.mp3" preload="metadata" data-track-title="subtle_gad" data-id="subtle_gad"></audio>
        
          
        <div class="song-stats">
          <div class="likes-counter" title="Dar Me gusta"><span class="heart-icon">♡</span> <span class="likes-count">0</span></div>
          <div class="plays-counter"><span class="plays-count">0</span> plays</div>
        </div>

        <div class="share-button-container">
          <a href="#" onclick="copyToClipboard('https://bvhankry.onrender.com','Subtle Gad'); return false;" class="share-whatsapp">Compartir</a>
        </div>
      </article>

      <!-- 3 -->
      <article class="cancion-card" id="card-regrecion" data-title="Regresión" data-artist="BVHanKrY"
        data-cover="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png">
        <button class="floating-play-btn btn-card-float" aria-label="Reproducir">
          <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        </button>

        <div class="song-header-row">
          <div>
            <div class="song-title-text">Regresión</div>
            <div class="song-artist-text">BVHanKrY</div>
          </div>
          <div class="mini-visualizer"><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        </div>

        <div class="player-wrapper">
          <div class="audio-controls-row-1">
            <button class="inline-play-btn btn-card" aria-label="Reproducir">
              <svg class="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
              <svg class="icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <div class="progress-container"><div class="progress-bar"></div></div>
            <div class="time-display">0:00</div>
          </div>
        </div>

        <audio src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/main/audio/regresi%C3%B3n.mp3" preload="metadata" data-track-title="regresion" data-id="regresion"></audio>
   
        <div class="song-stats">
          <div class="likes-counter" title="Dar Me gusta"><span class="heart-icon">♡</span> <span class="likes-count">0</span></div>
          <div class="plays-counter"><span class="plays-count">0</span> plays</div>
        </div>

        <div class="share-button-container">
          <a href="#" onclick="copyToClipboard('https://bvhankry.onrender.com','Regresión'); return false;" class="share-whatsapp">Compartir</a>
        </div>
      </article>
    </div>

           <!-- STREAMING -->
    <section id="streaming-section" class="streaming scroll-fade">
  <h2>Streaming en otras plataformas</h2>

<div class="embed embed-grid">
  <div class="embed-item embed-spotify">
    <iframe
      src="https://open.spotify.com/embed/playlist/37i9dQZF1E4yFKxFgd38pU"
      loading="lazy"
      frameborder="0"
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
    </iframe>
  </div>

  <div class="embed-item embed-youtube">
    <div class="yt-box">
      <iframe
        src="https://www.youtube.com/embed/JJoU2X8_I0I"
        loading="lazy"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        allowfullscreen>
      </iframe>
    </div>
  </div>
</div>

  <!-- BOTONES FALLBACK (por si el navegador bloquea embeds) -->
  <div style="margin-top:14px; display:flex; gap:12px; flex-wrap:wrap;">
    <a
      class="share-whatsapp"
      href="https://open.spotify.com/playlist/37i9dQZF1E4yFKxFgd38pU"
      target="_blank"
      rel="noopener">
      Abrir playlist en Spotify
    </a>

    <a
      class="share-whatsapp"
      href="https://youtu.be/JJoU2X8_I0I"
      target="_blank"
      rel="noopener">
      Ver video en YouTube
    </a>
  </div>
</section>
    
    <div class="info-sections">
      <section id="music-info">
        <h2>Sobre el EP</h2>
        <p>El proyecto "Pulso" explora las profundidades del Dub Music desde Ecuador. Frecuencias bajas diseñadas para sistemas de sonido potentes y atmósferas que transportan al oyente.</p>
        <span class="tag-coming-soon">Streaming Everywhere</span>
      </section>

      <section id="videos">
        <h2>Visuales</h2>
        <p>Experiencias audiovisuales complementarias.</p>
        <span class="tag-coming-soon">Coming Soon</span>
      </section>

      <section id="shop">
        <h2>Mercancía</h2>
        <p>Soporta el arte directamente. Vinilos de edición limitada y diseños exclusivos.</p>
        <span class="tag-coming-soon">Tienda Oficial</span>
      </section>
    </div>

    <footer>
      <div class="footer-logo">BVHanKrY</div>
      <p>© 2026 BVHanKrY - Todos los derechos reservados. Diseñado con pasión por la música y el sonido.</p>
    </footer>
  </div>

  <!-- GLOBAL PLAYER -->
  <div class="global-player" id="globalPlayer">
    <div class="gp-left">
      <div class="gp-cover" id="gpCover">
        <img id="gpCoverImg" src="https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png" alt="Cover">
      </div>
      <div class="gp-info-text">
        <div class="gp-title" id="gpTitle">Título</div>
        <div class="gp-artist" id="gpArtist">Artista</div>
      </div>
    </div>

    <div class="gp-center">
      <div class="gp-controls">
        <button class="gp-btn" id="gpPrevBtn" title="Anterior">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
        </button>

        <button class="gp-play-pause" id="gpPlayBtn" aria-label="Play/Pause">
          <svg class="gp-icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <svg class="gp-icon-pause" viewBox="0 0 24 24" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>

        <button class="gp-btn" id="gpNextBtn" title="Siguiente">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
        </button>
      </div>

      <div class="gp-progress-wrapper">
        <span id="gpCurrentTime">0:00</span>
        <div class="gp-progress-container" id="gpProgressContainer">
          <div class="gp-progress-bar" id="gpProgressBar"></div>
        </div>
        <span id="gpDuration">0:00</span>
      </div>

      <div class="gp-extra-actions">
        <button class="gp-action-btn" id="gpLikeBtn" title="Me gusta">
          <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
        </button>

        <div class="share-menu-container-center">
          <button class="gp-action-btn" id="gpShareToggleBtn" title="Compartir">
            <svg viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
          </button>

          <div class="share-dropdown" id="shareDropdown">
            <a href="#" class="share-item" target="_blank" id="link-wa">WA</a>
            <a href="#" class="share-item" target="_blank" id="link-fb">FB</a>
            <a href="#" class="share-item" target="_blank" id="link-tw">X</a>
            <a href="#" class="share-item" target="_blank" id="link-tg">TG</a>
            <a href="https://www.tiktok.com/" class="share-item" target="_blank">TikTok</a>
            <a href="https://www.instagram.com/henryandresvill/" class="share-item" target="_blank">Insta</a>
          </div>
        </div>
      </div>
    </div>

    <div class="gp-right">
      <div class="volume-widget">
        <button class="gp-btn" title="Volumen">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
        </button>

        <div class="volume-popover">
          <input type="range" class="vol-slider-vertical" min="0" max="1" step="0.01" value="1" id="gpVolumeSlider">
        </div>
      </div>
    </div>
  </div>

  <div id="toast-container"></div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // ===== MENU HAMBURGUESA (1 SOLO LISTENER) =====
      const menuBtn = document.querySelector('.menu-toggle');
      const navLinks = document.querySelector('.nav-links');
      menuBtn.addEventListener('click', () => {
        const willOpen = !navLinks.classList.contains('active');
        navLinks.classList.toggle('active');
        menuBtn.setAttribute('aria-expanded', String(willOpen));
      });

      // ===== SCROLL NAV HIDE =====
      let lastScroll = 0;
      window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        const nav = document.querySelector('.main-nav');
        if (currentScroll > lastScroll && currentScroll > 100) nav.classList.add('hidden-nav');
        else nav.classList.remove('hidden-nav');
        lastScroll = currentScroll;
      });

      // ===== SCROLL FADE =====
      const scrollElements = document.querySelectorAll(".scroll-fade");
      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add("visible");
        });
      }, { threshold: 0.25 });
      scrollElements.forEach(el => io.observe(el));

      // ===== AUDIO PLAYER =====
      let currentAudio = null;
      let currentCardId = null;
      let globalVolumeValue = 1.0;

      const cards = Array.from(document.querySelectorAll('.cancion-card'));

      const globalPlayer = document.getElementById('globalPlayer');
      const gpTitle = document.getElementById('gpTitle');
      const gpArtist = document.getElementById('gpArtist');
      const gpCoverImg = document.getElementById('gpCoverImg');
      const gpPlayBtn = document.getElementById('gpPlayBtn');
      const gpIconPlay = gpPlayBtn.querySelector('.gp-icon-play');
      const gpIconPause = gpPlayBtn.querySelector('.gp-icon-pause');
      const gpProgressBar = document.getElementById('gpProgressBar');
      const gpProgressContainer = document.getElementById('gpProgressContainer');
      const gpCurrentTime = document.getElementById('gpCurrentTime');
      const gpDuration = document.getElementById('gpDuration');
      const gpVolSlider = document.getElementById('gpVolumeSlider');
      const gpNextBtn = document.getElementById('gpNextBtn');
      const gpPrevBtn = document.getElementById('gpPrevBtn');
      const gpLikeBtn = document.getElementById('gpLikeBtn');
      const shareToggleBtn = document.getElementById('gpShareToggleBtn');
      const shareDropdown = document.getElementById('shareDropdown');

      const defaultCover = "https://raw.githubusercontent.com/BVHanKrY/bvhankry.music/refs/heads/main/fondo/portada%20pulso.png";

      const formatTime = (s) => {
      if (isNaN(s) || !isFinite(s)) return "0:00";
      const sign = s < 0 ? "-" : "";
      s = Math.max(0, Math.floor(Math.abs(s)));
      const m = Math.floor(s / 60);
      const sec = s % 60;
      return `${sign}${m}:${sec < 10 ? "0" : ""}${sec}`;};


      function showToast(msg){
        const container = document.getElementById('toast-container');
        if(container.querySelector('.toast.show')) return;
        const t = document.createElement('div');
        t.className = 'toast show';
        t.textContent = msg;
        container.appendChild(t);
        setTimeout(() => { t.classList.remove('show'); setTimeout(()=>t.remove(), 250); }, 2200);
      }

      function resetCardUI(cardId){
        if(!cardId) return;
        const card = document.getElementById(cardId);
        card.classList.remove('playing');
        card.querySelector('.progress-bar').style.width = '0%';
        card.querySelector('.icon-play').style.display = 'block';
        card.querySelector('.icon-pause').style.display = 'none';
        const floatBtn = card.querySelector('.btn-card-float svg');
        if(floatBtn) floatBtn.innerHTML = '<path d="M8 5v14l11-7z"/>';
      }

      function updateCardUI(cardId, isPlaying){
        if(!cardId) return;
        const card = document.getElementById(cardId);
        const playIcon = card.querySelector('.icon-play');
        const pauseIcon = card.querySelector('.icon-pause');
        const floatIcon = card.querySelector('.btn-card-float svg');

        if(isPlaying){
          card.classList.add('playing');
          playIcon.style.display = 'none';
          pauseIcon.style.display = 'block';
          if(floatIcon) floatIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
        }else{
          card.classList.remove('playing');
          playIcon.style.display = 'block';
          pauseIcon.style.display = 'none';
          if(floatIcon) floatIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
        }
      }

      function updateGlobalPlayerUI(isPlaying){
        if(!currentAudio) return;
        const card = document.getElementById(currentCardId);
        gpTitle.textContent = card.dataset.title;
        gpArtist.textContent = card.dataset.artist;

        if(isPlaying){
          gpIconPlay.style.display = 'none';
          gpIconPause.style.display = 'block';
          document.getElementById('gpCover').classList.add('gp-cover-spin');
        }else{
          gpIconPlay.style.display = 'block';
          gpIconPause.style.display = 'none';
          document.getElementById('gpCover').classList.remove('gp-cover-spin');
        }
      }

      function updateShareLinks(title){
        const text = `Escucha ${title} en BVHanKrY Music`;
        const url = 'https://bvhankry.onrender.com';
        document.getElementById('link-wa').href = `https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`;
        document.getElementById('link-fb').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
        document.getElementById('link-tw').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
        document.getElementById('link-tg').href = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;
      }

      function updateGlobalLikeState(cardId){
        const isLiked = localStorage.getItem(`like-${cardId}`) === 'true';
        const icon = gpLikeBtn.querySelector('svg');
        if(isLiked){
          gpLikeBtn.classList.add('active-like');
          icon.style.fill = 'var(--accent-green)';
        }else{
          gpLikeBtn.classList.remove('active-like');
          icon.style.fill = 'currentColor';
        }
      }

      function toggleLike(cardId){
        const card = document.getElementById(cardId);
        const likeState = localStorage.getItem(`like-${cardId}`) === 'true';
        const newState = !likeState;
        localStorage.setItem(`like-${cardId}`, newState);

        const heart = card.querySelector('.heart-icon');
        const countSpan = card.querySelector('.likes-count');
        let count = parseInt(countSpan.innerText || '0', 10);

        if(newState){
          heart.classList.add('liked');
          heart.textContent = '♥';
          count++;
          showToast("Añadido a Me gusta");
        }else{
          heart.classList.remove('liked');
          heart.textContent = '♡';
          count = Math.max(0, count - 1);
        }
        countSpan.innerText = count;

        if(currentCardId === cardId) updateGlobalLikeState(cardId);
      }

      function playSong(cardId){
        const card = document.getElementById(cardId);
        const audio = card.querySelector('audio');
        const coverUrl = card.dataset.cover || defaultCover;

        if(currentAudio === audio && !audio.paused){
          audio.pause();
          updateCardUI(cardId, false);
          updateGlobalPlayerUI(false);
          return;
        }

        if(currentAudio && currentAudio !== audio){
          currentAudio.pause();
          currentAudio.currentTime = 0;
          resetCardUI(currentCardId);
        }

        currentAudio = audio;
        currentCardId = cardId;

        gpCoverImg.style.opacity = '0';
        setTimeout(() => {
          gpCoverImg.src = coverUrl;
          gpCoverImg.style.opacity = '1';
        }, 120);

        audio.volume = globalVolumeValue;

        audio.play().then(() => {
          globalPlayer.classList.add('active');
          updateCardUI(cardId, true);
          updateGlobalPlayerUI(true);
          updateShareLinks(card.dataset.title);
          updateGlobalLikeState(cardId);

          // plays
          const playsEl = card.querySelector('.plays-count');
          if(!audio.dataset.counted){
            let count = parseInt(localStorage.getItem(`plays-${audio.dataset.id}`) || '0', 10);
            count++;
            playsEl.textContent = count;
            localStorage.setItem(`plays-${audio.dataset.id}`, count);
            audio.dataset.counted = 'true';
          }
        }).catch(() => showToast("Error al cargar audio"));
      }

      function playNext(){
        if(!currentCardId) return;
        const i = cards.findIndex(c => c.id === currentCardId);
        playSong(cards[(i + 1) % cards.length].id);
      }
      function playPrev(){
        if(!currentCardId) return;
        const i = cards.findIndex(c => c.id === currentCardId);
        playSong(cards[(i - 1 + cards.length) % cards.length].id);
      }

      // Bind buttons
      gpPlayBtn.addEventListener('click', () => {
        if(currentAudio){
          if(currentAudio.paused) playSong(currentCardId);
          else { currentAudio.pause(); updateCardUI(currentCardId,false); updateGlobalPlayerUI(false); }
        } else if(cards.length) {
          playSong(cards[0].id);
        }
      });
      gpNextBtn.addEventListener('click', playNext);
      gpPrevBtn.addEventListener('click', playPrev);

      gpProgressContainer.addEventListener('click', (e) => {
        if(!currentAudio) return;
        const rect = gpProgressContainer.getBoundingClientRect();
        const pct = (e.clientX - rect.left) / rect.width;
        currentAudio.currentTime = pct * currentAudio.duration;
      });

      gpVolSlider.addEventListener('input', (e) => {
        globalVolumeValue = parseFloat(e.target.value);
        if(currentAudio) currentAudio.volume = globalVolumeValue;
      });

      gpLikeBtn.addEventListener('click', () => { if(currentCardId) toggleLike(currentCardId); });

      // Dropdown share
      shareToggleBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        shareDropdown.classList.toggle('active');
      });
      document.addEventListener('click', (e) => {
        if(!shareDropdown.contains(e.target) && e.target !== shareToggleBtn){
          shareDropdown.classList.remove('active');
        }
      });

      // Cards events
      cards.forEach(card => {
        const audio = card.querySelector('audio');

        // init plays from storage
        const plays = parseInt(localStorage.getItem(`plays-${audio.dataset.id}`) || '0', 10);
        card.querySelector('.plays-count').textContent = plays;

        // init like icon state on card
        if(localStorage.getItem(`like-${card.id}`) === 'true'){
          card.querySelector('.heart-icon').classList.add('liked');
          card.querySelector('.heart-icon').textContent = '♥';
        }

        card.querySelectorAll('.btn-card, .btn-card-float').forEach(btn => {
          btn.addEventListener('click', (e) => { e.stopPropagation(); playSong(card.id); });
        });

        card.querySelector('.likes-counter').addEventListener('click', (e) => {
          e.stopPropagation();
          toggleLike(card.id);
        });

        card.querySelector('.progress-container').addEventListener('click', (e) => {
          e.stopPropagation();
          const rect = e.currentTarget.getBoundingClientRect();
          const pct = (e.clientX - rect.left) / rect.width;
          audio.currentTime = pct * audio.duration;
        });

        audio.addEventListener('loadedmetadata', () => {
          if(audio === currentAudio && gpDuration) gpDuration.textContent = formatTime(audio.duration);
        });

        audio.addEventListener('ended', playNext);
      });

      // Global time update loop
      function rafUpdate(){
        if(currentAudio){
          const pct = (currentAudio.currentTime / currentAudio.duration) * 100;
          if(isFinite(pct)) gpProgressBar.style.width = `${pct}%`;
          const remaining = (currentAudio.duration || 0) - (currentAudio.currentTime || 0);

    // Izquierda: tiempo restante (conteo regresivo)
        gpCurrentTime.textContent = formatTime(remaining);

    // Derecha (PC): duración total (en móvil está oculto por CSS)
        gpDuration.textContent = formatTime(currentAudio.duration);


          const card = document.getElementById(currentCardId);
          if(card){
            card.querySelector('.progress-bar').style.width = `${isFinite(pct) ? pct : 0}%`;
            card.querySelector('.time-display').textContent = formatTime(remaining);
          }
        }
        requestAnimationFrame(rafUpdate);
      }
      requestAnimationFrame(rafUpdate);

      // Clipboard
      window.copyToClipboard = (url, title) => {
        navigator.clipboard.writeText(`${title} - ${url}`).then(() => showToast("Enlace copiado"));
      };
    });
  </script>
  <script>
(() => {
  const section = document.getElementById("streaming-section");
  if (!section) return;

  // Solo PC para evitar consumo en móvil
  const isPC = window.matchMedia("(min-width: 769px)").matches;
  if (!isPC) return;

  const items = section.querySelectorAll(".embed-item");
  let ticking = false;

  function parallax() {
    ticking = false;
    const r = section.getBoundingClientRect();
    const vh = window.innerHeight || 800;

    // Progreso de visibilidad (0 a 1 aprox)
    const t = (vh - r.top) / (vh + r.height);
    const clamped = Math.max(0, Math.min(1, t));

    // Movimiento MUY sutil, premium
    const y1 = (0.5 - clamped) * 18; // Spotify
    const y2 = (0.5 - clamped) * 28; // YouTube

    if (items[0]) items[0].style.transform = `translateY(${y1}px)`;
    if (items[1]) items[1].style.transform = `translateY(${y2}px)`;
  }

  window.addEventListener("scroll", () => {
    if (!ticking) {
      ticking = true;
      requestAnimationFrame(parallax);
    }
  }, { passive: true });

  window.addEventListener("resize", () => requestAnimationFrame(parallax));
  requestAnimationFrame(parallax);
})();
</script>
  
<script>
  window.dataLayer = window.dataLayer || [];

  document.querySelectorAll('audio').forEach((audio) => {
    const getTitle = () => audio.getAttribute('data-track-title') || 'desconocido';
    const getId = () => audio.getAttribute('data-track-id') || audio.getAttribute('data-id') || 'sin_id';

    audio.addEventListener('play', () => {
      window.dataLayer.push({
        event: 'audio_play',
        track_title: getTitle(),
        track_id: getId()
      });
    });

    audio.addEventListener('pause', () => {
      window.dataLayer.push({
        event: 'audio_pause',
        track_title: getTitle(),
        track_id: getId()
      });
    });

    audio.addEventListener('ended', () => {
      window.dataLayer.push({
        event: 'audio_end',
        track_title: getTitle(),
        track_id: getId()
      });
    });
  });
</script>

</body>
</html>
